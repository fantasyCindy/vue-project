!function(n){function t(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return n[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var e={};return t.m=n,t.c=e,t.p="/public/bundle/",t(0)}([function(n,t,e){"use strict";e(1);var r=e(2),i=e(3),u=function(){var n,t,e=$("#myAuth"),u=e.find(".affirm"),o=function(n,t){n.parent().find(".hint").remove(),""==t?n.parent().find(".hint").remove():n.parent().append('<div class="hint">'+t+"</div>")};return{init:function(){$("#name").keyup(function(){var e=/^([\u4e00-\u9fa5\.\·]{2,20}|[a-zA-Z\.\s]{1,20})$/,r=$(this).val(),i=e.test(_.trim(r));n=i,o($(this),i?"":""==r?"姓名不能为空":"姓名格式错误"),n&&t?u.addClass("touch"):u.removeClass("touch")}).blur(function(){$(this).trigger("keyup")}),$("#code").keyup(function(){var e=$(this).val(),r=i(_.trim(e));t=r,n&&t?u.addClass("touch"):u.removeClass("touch"),o($(this),r?"":""==e?"身份证号不能为空":"身份证格式错误")}).blur(function(){$(this).trigger("keyup")}),e.on("mouseup",".touch",function(){var n=$("#myAuth_form").serialize();r.postJSON("/app/verificationIdCard.htm",n,function(n){if(1==n.status&&(n=n.data,a.init()),9e4==n.status){var t=0==n.data.validateCount?"您的认证机会已用完，请明天再试":"您还有"+n.data.validateCount+"次认证机会";e.find(".error span").html("身份证号码验证不通过或身份证号码与姓名不匹配，"+t)}90001==n.status&&layer.msg("以通过实名制认证"),90004==n.status&&e.find(".error span").html("认证次数已用完，请明天再试"),90005==n.status&&e.find(".error span").html("身份证绑定用户数已达上限")})})}}}(),a=function(){$("#myAuth");return{init:function(){r.postJSON("/app/isIdCard.htm",function(n){n=n.data.isCard,"false"==n?($("#myAuth_form").show(),$("#success").hide()):($("#success").show(),$("#myAuth_form").hide(),r.postJSON("/app/userIdCard.htm",function(n){n=n.data,$("#success .message").html(n.username+" "+n.idCard)}))})}}}();$(function(){ynIsLogin&&""!=ynTeacherId&&(location.href=__path),a.init(),yn.centerMenu.init({render:"my",light:"实名认证"}),u.init()})},function(n,t){"use strict";yn.navigation.name=ynconfig.navigation.g,yn.logout.path=__path,ynIsLogin||(setTimeout(function(){yn.login.render()},100),yn.login.onClose=function(){location.href=__path}),yn.centerMenu=function(){var n,t,e,r,i=function(n){return _.map(n,function(n){var t=_.trim(n.menuname)==r?"select":"";return'<a class="item '+t+'" id="'+n.menu_id+' " href="/'+n.menuurl+'">\n                    <span class="txt ">'+n.menuname+'</span>\n                    <i class="fa fa-angle-right "></i>\n                </a>'}).join("")};return{init:function(i){n=$("#centerMenu"),t=n.find(".items"),e=n.find(".title .name"),r=i.light||"",i.render&&this.render({type:i.render})},render:function(n){n=_.extend({type:"center"},n);var r={center:{title:"个人设置",url:"/menu/queryWebUserMenu.htm"},my:{title:"个人中心",url:"/menu/queryWebUserMyMenu.htm"}},u=r[n.type],a=u.url;e.text(u.title),new yn.loading({container:t,margin:200}).render(),$.getJSON(a,{user_id:ynUserId},function(n){return t.html(i(n))})}}}()},function(n,t){"use strict";n.exports={ajax:function(n,t,e){"function"==typeof t&&(e=t,t={}),$.ajax({url:n,data:t,dataType:"json",success:function(n){e(n)},error:function(n){console.log("===err",n)}})},getJSON:function(n,t,e){"function"==typeof t&&(e=t,t={}),$.getJSON(n,t,function(n){e(n)})},postJSON:function(n,t,e){"function"==typeof t&&(e=t,t={}),$.post(n,t,function(n){e(n)},"json")},post:function(n,t,e){"function"==typeof t&&(e=t,t={}),$.post(n,t,function(n){e(n)})}}},function(n,t){"use strict";var e=function(n){n=String(n);var t={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外"},e=function(n){return!!(n&&r(n)&&i(n)&&u(n)&&o(n))},r=function(n){var t=/(^\d{15}$)|(^\d{17}(\d|X)$)/;return t.test(n)!==!1},i=function(n){var e=n.substr(0,2);return void 0!=t[e]},u=function(n){var t=n.length;if("15"==t){var e=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/,r=n.match(e),i=r[2],u=r[3],o=r[4],s=new Date("19"+i+"/"+u+"/"+o);return a("19"+i,u,o,s)}if("18"==t){var c=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,r=n.match(c),i=r[2],u=r[3],o=r[4],s=new Date(i+"/"+u+"/"+o);return a(i,u,o,s)}return!1},a=function(n,t,e,r){var i=new Date,u=i.getFullYear();if(r.getFullYear()==n&&r.getMonth()+1==t&&r.getDate()==e){var a=u-n;return a>=3&&a<=100}return!1},o=function(n){n=s(n);var t=n.length;if("18"==t){var e,r,i=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),u=new Array("1","0","X","9","8","7","6","5","4","3","2"),a=0;for(e=0;e<17;e++)a+=n.substr(e,1)*i[e];return r=u[a%11],r==n.substr(17,1)}return!1},s=function(n){if("15"==n.length){var t,e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),r=new Array("1","0","X","9","8","7","6","5","4","3","2"),i=0;for(n=n.substr(0,6)+"19"+n.substr(6,n.length-6),t=0;t<17;t++)i+=n.substr(t,1)*e[t];return n+=r[i%11]}return n};return e(n)};n.exports=e}]);